'use strict';

var util = require('util');
<<<<<<< HEAD

function AbortError (obj) {
    Error.captureStackTrace(this, this.constructor);
=======
var assert = require('assert');
var RedisError = require('redis-parser').RedisError;
var ADD_STACKTRACE = false;

function AbortError (obj, stack) {
    assert(obj, 'The options argument is required');
    assert.strictEqual(typeof obj, 'object', 'The options argument has to be of type object');

    RedisError.call(this, obj.message, ADD_STACKTRACE);
>>>>>>> 27f030ccf83fdf367a2c3cdcfdb004dbc71f023c
    Object.defineProperty(this, 'message', {
        value: obj.message || '',
        configurable: true,
        writable: true
    });
<<<<<<< HEAD
=======
    if (stack || stack === undefined) {
        Error.captureStackTrace(this, AbortError);
    }
>>>>>>> 27f030ccf83fdf367a2c3cdcfdb004dbc71f023c
    for (var keys = Object.keys(obj), key = keys.pop(); key; key = keys.pop()) {
        this[key] = obj[key];
    }
}

function AggregateError (obj) {
<<<<<<< HEAD
    Error.captureStackTrace(this, this.constructor);
=======
    assert(obj, 'The options argument is required');
    assert.strictEqual(typeof obj, 'object', 'The options argument has to be of type object');

    AbortError.call(this, obj, ADD_STACKTRACE);
>>>>>>> 27f030ccf83fdf367a2c3cdcfdb004dbc71f023c
    Object.defineProperty(this, 'message', {
        value: obj.message || '',
        configurable: true,
        writable: true
    });
<<<<<<< HEAD
=======
    Error.captureStackTrace(this, AggregateError);
>>>>>>> 27f030ccf83fdf367a2c3cdcfdb004dbc71f023c
    for (var keys = Object.keys(obj), key = keys.pop(); key; key = keys.pop()) {
        this[key] = obj[key];
    }
}

<<<<<<< HEAD
util.inherits(AbortError, Error);
=======
util.inherits(AbortError, RedisError);
>>>>>>> 27f030ccf83fdf367a2c3cdcfdb004dbc71f023c
util.inherits(AggregateError, AbortError);

Object.defineProperty(AbortError.prototype, 'name', {
    value: 'AbortError',
<<<<<<< HEAD
    // configurable: true,
=======
    configurable: true,
>>>>>>> 27f030ccf83fdf367a2c3cdcfdb004dbc71f023c
    writable: true
});
Object.defineProperty(AggregateError.prototype, 'name', {
    value: 'AggregateError',
<<<<<<< HEAD
    // configurable: true,
=======
    configurable: true,
>>>>>>> 27f030ccf83fdf367a2c3cdcfdb004dbc71f023c
    writable: true
});

module.exports = {
    AbortError: AbortError,
    AggregateError: AggregateError
};
